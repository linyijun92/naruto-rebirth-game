# 火影忍者世界游戏 - 功能测试计划

## 测试环境
- 浏览器：Chrome / Firefox / Safari（最新版本）
- 设备：桌面端和移动端
- 网络：正常网络环境

## 测试前准备
1. 确保后端 API 已部署并正常运行
2. 确保数据库表已创建
3. 清除浏览器 localStorage 和 cookies
4. 创建测试账号

---

## 模块 1：加载存档功能测试

### 测试场景 1.1：正常加载存档
**步骤：**
1. 登录游戏账号
2. 玩游戏一段时间，完成一些任务或提升属性
3. 创建存档，命名为"测试存档1"
4. 继续游戏，做一些改变（提升属性、完成任务等）
5. 在存档界面点击"加载"按钮
6. 确认加载"测试存档1"

**预期结果：**
- 存档加载成功提示
- 玩家等级、货币恢复到存档时的状态
- 属性值恢复到存档时的状态
- 当前章节和节点恢复到存档时的状态
- 任务进度恢复到存档时的状态
- 所有 UI 正确显示恢复后的数据

### 测试场景 1.2：取消加载存档
**步骤：**
1. 在存档界面点击"加载"按钮
2. 在确认对话框中点击"取消"

**预期结果：**
- 不进行任何操作
- 游戏状态保持不变

### 测试场景 1.3：加载不存在的存档
**步骤：**
1. 直接调用 API 加载一个不存在的 saveId

**预期结果：**
- 显示"加载存档失败"错误提示
- 游戏状态保持不变

### 测试场景 1.4：网络错误处理
**步骤：**
1. 断开网络连接
2. 尝试加载存档

**预期结果：**
- 显示"加载存档失败：网络错误，请稍后重试"错误提示
- 游戏状态保持不变

### 测试场景 1.5：数据持久化验证
**步骤：**
1. 加载存档
2. 刷新页面
3. 检查游戏状态

**预期结果：**
- 游戏状态保持为加载后的状态
- 数据已正确持久化到 localStorage

---

## 模块 2：任务系统测试

### 测试场景 2.1：完成任务
**步骤：**
1. 进入任务界面
2. 找到一个状态为"进行中"的任务
3. 点击"完成任务"按钮

**预期结果：**
- 显示"任务完成！获得：[奖励描述]"提示
- 任务状态更新为"已完成"
- 显示"领取奖励"按钮
- 货币增加（如果有货币奖励）
- 经验值增加（如果有经验奖励）
- 属性增加（如果有属性奖励）
- UI 正确显示更新后的数据

### 测试场景 2.2：领取奖励
**步骤：**
1. 进入任务界面
2. 找到一个状态为"已完成"的任务（未领取奖励）
3. 点击"领取奖励"按钮

**预期结果：**
- 显示"奖励领取成功！获得：[奖励描述]"提示
- 任务状态保持"已完成"
- 按钮变为"已领取"（禁用状态）
- 货币增加（如果有货币奖励）
- UI 正确显示更新后的数据

### 测试场景 2.3：已领取的任务
**步骤：**
1. 查看已领取奖励的任务

**预期结果：**
- 显示"已领取"按钮（禁用状态）
- 按钮不可点击
- 状态显示为"已完成"

### 测试场景 2.4：任务列表显示
**步骤：**
1. 进入任务界面
2. 查看所有任务

**预期结果：**
- 显示所有任务列表
- 每个任务显示标题、描述、奖励、状态
- 根据任务状态显示正确的操作按钮：
  - "进行中" → "完成任务"按钮
  - "已完成（未领取）" → "领取奖励"按钮
  - "已完成（已领取）" → "已领取"按钮（禁用）

### 测试场景 2.5：网络错误处理
**步骤：**
1. 断开网络连接
2. 尝试完成任务
3. 尝试领取奖励

**预期结果：**
- 显示"任务完成失败：网络错误，请稍后重试"错误提示
- 显示"奖励领取失败：网络错误，请稍后重试"错误提示
- 任务状态保持不变

### 测试场景 2.6：数据持久化验证
**步骤：**
1. 完成任务
2. 刷新页面
3. 检查任务状态和玩家数据

**预期结果：**
- 任务状态保持为"已完成"
- 货币和经验值保持为更新后的值
- 数据已正确持久化到 localStorage

---

## 模块 3：属性系统测试

### 测试场景 3.1：正常提升属性
**步骤：**
1. 进入属性界面
2. 确保有可用的属性点
3. 点击某个属性的"提升"按钮（如查克拉）

**预期结果：**
- 显示"查克拉 升级成功！从 [旧值] 提升到 [新值]"提示
- 查克拉值增加1
- 属性点数减少1
- 进度条更新显示新值
- 其他属性保持不变

### 测试场景 3.2：属性满级状态
**步骤：**
1. 将某个属性提升到 100
2. 查看该属性的提升按钮

**预期结果：**
- 显示"已满级"按钮（禁用状态）
- 按钮不可点击
- 属性值不再增加

### 测试场景 3.3：属性点不足状态
**步骤：**
1. 消耗所有属性点
2. 查看属性的提升按钮

**预期结果：**
- 显示"属性点不足"按钮（禁用状态）
- 按钮不可点击
- 属性值不能增加

### 测试场景 3.4：属性进度条显示
**步骤：**
1. 查看每个属性的进度条

**预期结果：**
- 进度条宽度正确反映属性值（50% = 宽度50%）
- 进度条颜色从渐变色显示（primary-color → accent-color）
- 属性值正确显示在进度条上方

### 测试场景 3.5：批量提升属性
**步骤：**
1. 有多个可用属性点
2. 依次提升多个属性

**预期结果：**
- 每次提升都成功
- 属性点数正确递减
- 每个属性的值正确增加
- 所有 UI 正确更新

### 测试场景 3.6：所有属性提升测试
**步骤：**
1. 依次测试所有6个属性的提升
   - 查克拉 (Chakra)
   - 忍术 (Ninjutsu)
   - 体术 (Taijutsu)
   - 智力 (Intelligence)
   - 速度 (Speed)
   - 幸运 (Luck)

**预期结果：**
- 所有属性都可以正常提升
- 提升按钮状态正确显示
- 属性值正确更新

### 测试场景 3.7：网络错误处理
**步骤：**
1. 断开网络连接
2. 尝试提升属性

**预期结果：**
- 显示"属性升级失败：网络错误，请稍后重试"错误提示
- 属性点数保持不变
- 属性值保持不变

### 测试场景 3.8：数据持久化验证
**步骤：**
1. 提升属性
2. 刷新页面
3. 检查属性值和属性点数

**预期结果：**
- 属性值保持为提升后的值
- 属性点数保持为扣除后的值
- 数据已正确持久化到 localStorage

---

## 集成测试

### 测试场景 4.1：完整游戏流程
**步骤：**
1. 注册新账号
2. 登录游戏
3. 完成一些任务，获取属性点
4. 提升属性
5. 创建存档
6. 继续游戏
7. 加载存档
8. 继续完成任务和提升属性

**预期结果：**
- 所有功能正常工作
- 数据正确持久化
- UI 正确更新
- 没有错误或异常

### 测试场景 4.2：多账号测试
**步骤：**
1. 注册多个账号
2. 在不同账号中进行不同的游戏操作
3. 切换账号登录

**预期结果：**
- 每个账号的数据独立
- 不会出现数据混淆
- localStorage 正确存储当前登录账号的数据

### 测试场景 4.3：移动端响应式测试
**步骤：**
1. 在移动设备上打开游戏
2. 测试所有功能（任务、属性、存档）

**预期结果：**
- 布局正确适配移动端
- 按钮大小适中，易于点击
- 文字大小适中，易于阅读
- 所有功能正常工作

---

## 性能测试

### 测试场景 5.1：大量数据加载
**步骤：**
1. 创建大量存档
2. 查看存档列表

**预期结果：**
- 存档列表快速加载
- 没有明显卡顿

### 测试场景 5.2：频繁操作测试
**步骤：**
1. 连续快速点击多个按钮（提升属性、完成任务等）

**预期结果：**
- 每个操作都能正确处理
- 没有重复提交
- UI 正确更新

---

## 兼容性测试

### 浏览器兼容性
- [ ] Chrome (最新版本)
- [ ] Firefox (最新版本)
- [ ] Safari (最新版本)
- [ ] Edge (最新版本)

### 设备兼容性
- [ ] 桌面端 (Windows/Mac/Linux)
- [ ] 移动端 (iOS/Android)
- [ ] 平板端 (iPad/Android Tablet)

---

## Bug 记录模板

| Bug ID | 模块 | 严重程度 | 问题描述 | 复现步骤 | 预期结果 | 实际结果 | 状态 |
|--------|------|----------|----------|----------|----------|----------|------|
| BUG-001 | - | - | - | - | - | - | - |

---

## 测试总结

### 通过的测试
- [ ] 模块 1：加载存档功能测试
- [ ] 模块 2：任务系统测试
- [ ] 模块 3：属性系统测试
- [ ] 集成测试
- [ ] 性能测试
- [ ] 兼容性测试

### 发现的问题
（记录测试过程中发现的所有问题）

### 建议
（记录改进建议和优化方向）

---

## 测试签名

- 测试人员：____________
- 测试日期：____________
- 测试环境：____________
- 测试结果：[ ] 通过 [ ] 未通过
