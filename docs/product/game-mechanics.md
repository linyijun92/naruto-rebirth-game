# 游戏机制详细设计

## 1. 属性系统

### 1.1 基础属性

| 属性名称 | 影响因素 | 最大值 | 初始范围 |
|---------|---------|-------|---------|
| 体质 (CON) | 生命值、体力、恢复速度 | 200 | 10-40 |
| 查克拉 (CHA) | 忍术消耗、查克拉量 | 200 | 10-40 |
| 速度 (SPD) | 先手率、闪避率 | 200 | 10-40 |
| 力量 (STR) | 物理攻击、破坏力 | 200 | 10-40 |
| 智力 (INT) | 学习速度、策略成功率 | 200 | 10-40 |
| 魅力 (CHR) | 人际关系、招募伙伴 | 200 | 10-40 |

**属性计算公式：**

- 生命值 = 体质 × 10
- 查克拉量 = 查克拉 × 10
- 体力 = 体质 × 5（最大 100）
- 先手率 = 速度 ÷ (双方速度之和) × 100%
- 闪避率 = min(速度 ÷ 2, 60%)
- 忍术伤害 = (查克拉 + 智力) × 忍术等级
- 物理伤害 = (力量 + 体质 ÷ 2) × 武器系数

### 1.2 特殊属性

#### **血继限界**
- 写轮眼（1-3勾玉 → 万花筒 → 轮回眼）
- 白眼
- 冰遁
- 火遁
- 土遁
- 雷遁
- 风遁
- 水遁
- 木遁（极稀有）

觉醒条件：
- 家族血继：特定家族有概率觉醒
- 修炼觉醒：通过特殊任务或事件
- 传承觉醒：从伙伴处学习

#### **仙人模式**
- 修行地点：妙木山（蛤蟆）、龙地洞（蛇）、湿骨林（蛞蝓）
- 修行条件：查克拉 ≥ 100，智力 ≥ 80
- 修行时长：3-6个月（游戏内时间）
- 效果：全属性提升 30%，持续 3 回合

#### **封印术**
- 封印等级：1-10 级
- 学习条件：智力 ≥ 60 + 封印等级 × 5
- 特殊封印：尸鬼封尽、封印法式、解邪法印等

---

## 2. 战斗系统

### 2.1 战斗流程

```
战斗开始 → 判定先手 → 回合循环（行动 → 效果计算 → 判定胜负）→ 结算奖励
```

### 2.2 行动类型

| 行动类型 | 消耗 | 描述 |
|---------|-----|------|
| 普通攻击 | 无 | 基于力量和武器的基础攻击 |
| 忍术 | 查克拉 | 释放已掌握的忍术 |
| 体术 | 体力 | 基于速度和力量的物理连击 |
| 幻术 | 查克拉+智力 | 控制敌人，造成混乱 |
| 道具 | 无 | 使用携带的道具 |
| 逃跑 | 体力 | 速度判定，成功则脱离战斗 |
| 合作 | 无 | 与伙伴共同攻击 |

### 2.3 战斗状态

- **正常**：无状态效果
- **中毒**：每回合损失 5% 生命值
- **麻痹**：速度降低 50%
- **混乱**：50% 概率攻击自己
- **封印**：无法使用忍术
- **恐惧**：攻击力降低 30%
- **狂暴**：攻击力提升 50%，防御降低 50%

### 2.4 战斗AI

敌人AI策略：
- **保守型**：优先回复和防御
- **激进型**：全力攻击
- **平衡型**：根据血量调整策略
- **特殊型**：有特定行为模式（如写轮眼复制忍术）

---

## 3. 忍术系统

### 3.1 忍术等级

| 等级 | 名称 | 学习条件 | 查克拉消耗 |
|-----|------|---------|-----------|
| E | 下忍 | 查克拉 10，智力 10 | 5-10 |
| D | 中忍 | 查克拉 30，智力 30 | 10-20 |
| C | 上忍 | 查克拉 60，智力 50 | 20-40 |
| B | 特别上忍 | 查克拉 100，智力 70 | 40-60 |
| A | 影级 | 查克拉 150，智力 90 | 60-80 |
| S | 传说级 | 查克拉 180，智力 100 | 80-100 |

### 3.2 忍术分类

**基础忍术**：
- 替身术（E级）
- 分身术（E级）
- 变身术（E级）
- 三身术组合（D级）

**属性忍术**：
- 火遁：豪火球之术（C）、火龙炎弹（B）、豪火灭却（A）
- 水遁：水遁·水阵壁（C）、水遁·大瀑布之术（B）、水遁·水断波（A）
- 风遁：风遁·螺旋丸（B）、风遁·螺旋手里剑（A）、风遁·仙法·螺旋手里剑（S）
- 雷遁：雷遁·千鸟（B）、雷遁·麒麟（S）
- 土遁：土遁·土流壁（C）、土遁·土隆·地狱绘卷（B）
- 木遁：木遁·木分身之术（B）、木遁·树界降诞（A）、木遁·木龙之术（A）

**特殊忍术**：
- 螺旋丸（A）
- 千鸟/千鸟流（A）
- 影分身之术（A）
- 飞雷神之术（S）
- 神乐心眼（B）
- 尸鬼封尽（S）
- 封印法式·解（B）

### 3.3 忍术学习

**学习方式**：
1. 自主修炼：消耗时间和资源
2. 拜师学艺：向伙伴或NPC学习
3. 卷轴学习：通过任务或购买获得
4. 战斗顿悟：战斗中有概率领悟

**修炼时间**：
- E级忍术：1-3 天
- D级忍术：3-7 天
- C级忍术：1-2 周
- B级忍术：2-4 周
- A级忍术：1-2 个月
- S级忍术：3-6 个月

---

## 4. 伙伴系统

### 4.1 伙伴类型

| 类型 | 示例 | 获取方式 | 忠诚度上限 |
|-----|------|---------|-----------|
| 主角 | 鸣人、佐助、小樱、卡卡西 | 剧情解锁 | 100 |
| 导师 | 三代火影、自来也、纲手 | 拜师任务 | 100 |
| 同期 | 各期毕业生 | 学校时期 | 80 |
| 同伴 | 忍界各忍村忍者 | 任务/事件 | 70 |
| 动物 | 哈马、牙、赤丸 | 驯兽任务 | 90 |
| 特殊 | 尾兽、特殊NPC | 特殊事件 | 100 |

### 4.2 伙伴属性

- **忠诚度**：影响伙伴出战意愿和特殊能力
- **好感度**：影响特殊剧情触发
- **羁绊等级**：提升伙伴能力和合体技
- **信任度**：影响任务成功率

### 4.3 伙伴互动

- **对话**：日常对话，提升好感度
- **送礼**：赠送礼物，快速提升好感度
- **共同训练**：一起修炼，提升双方属性
- **委托任务**：让伙伴单独执行任务
- **合体技**：高羁绊等级可使用

### 4.4 伙伴羁绊

羁绊等级：1-10 级
羁绊效果：
- Lv1：基础对话
- Lv3：解锁特殊对话
- Lv5：解锁合体技
- Lv7：解锁隐藏剧情
- Lv9：解锁专属任务
- Lv10：获得伙伴称号

---

## 5. 任务系统

### 5.1 任务分类

**日常任务**（每日刷新，10个）：
- 基础训练：提升指定属性
- 收集任务：收集特定道具
- 击败任务：击败特定敌人
- 对话任务：与特定角色对话
- 探索任务：探索特定地点

**主线任务**（推动剧情）：
- 忍者学校篇：毕业考核
- 下忍篇：中忍考试
- 上忍篇：晋升任务
- 影级篇：成为火影（或其他影）
- 最终篇：第四次忍界大战

**支线任务**（丰富内容）：
- 角色个人篇：深入了解角色故事
- 家族任务：家族相关事件
- 传说任务：寻找传说中的物品/地点
- 隐藏任务：特定条件触发

**限时活动**（周期性）：
- 节日活动：新年、情人节等
- 主题活动：特定角色或剧情
- 排行榜活动：竞技场挑战
- 联合活动：多服合作

### 5.2 任务难度

| 难度 | 推荐属性 | 奖励系数 |
|-----|---------|---------|
| 普通 | 基础属性 30+ | 1.0x |
| 困难 | 基础属性 60+ | 1.5x |
| 极难 | 基础属性 100+ | 2.0x |
| 传说 | 基础属性 150+ | 3.0x |
| 史诗 | 基础属性 180+ | 5.0x |

### 5.3 任务奖励

- **基础奖励**：经验值、金币、声望
- **属性奖励**：永久属性点
- **道具奖励**：装备、秘药、卷轴
- **特殊奖励**：称号、技能点、剧情解锁
- **隐藏奖励**：稀有事件触发概率提升

---

## 6. 重生系统

### 6.1 重生触发条件

**主动重生**：
- 达成指定年龄（如 60 岁）
- 完成特定成就（如成为火影）
- 使用重生卷轴

**被动重生**：
- 战斗死亡
- 剧情死亡（某些剧情分支）
- 自然死亡（寿命耗尽）

### 6.2 重生继承

**保留内容**：
- 成就和称号（100%）
- 已解锁的剧情分支（100%）
- 特殊天赋（100%）
- 技能熟练度（50%）
- 属性点数（30-50%，基于寿命）

**重置内容**：
- 年龄重置为 6 岁
- 剧情进度重置
- 伙伴关系重置
- 物品清空（可保留少量传家宝）
- 声望值重置

### 6.3 重生加成

**重生次数加成**：
- 第1次：无加成
- 第3次：属性继承率 +5%
- 第5次：开局随机天赋 +1
- 第10次：解锁特殊家族选项
- 第20次：觉醒血继限界概率翻倍

**特殊加成**：
- 达成特定成就：永久加成
- 完成特定剧情：解锁特殊选项
- 购买加成道具：临时或永久提升

### 6.4 重生奖励

- **重生点数**：每次重生获得，可兑换特殊道具
- **家族传承**：将当前家族传给下一世
- **记忆碎片**：保留少量记忆，影响剧情
- **天赋觉醒**：重生前可觉醒新的天赋

---

## 7. 经济系统

### 7.1 货币类型

| 货币 | 用途 | 获取方式 |
|-----|------|---------|
| 金币 | 日常消费、道具购买 | 任务奖励、击杀敌人、出售道具 |
| 钻石 | 高级道具、加速 | 充值、成就奖励、活动奖励 |
| 声望 | 解锁特殊内容 | 完成任务、提升伙伴羁绊 |
| 贡献 | 家族/组织消费 | 家族任务、组织活动 |

### 7.2 道具类型

**消耗品**：
- 体力药水：恢复体力
- 查克拉药水：恢复查克拉
- 生命药水：恢复生命值
- 洗点药剂：重置属性点
- 重生卷轴：主动重生

**装备**：
- 武器：苦无、手里剑、刀剑等
- 防具：护额、护甲、护腕等
- 饰品：项链、戒指、耳环等

**特殊道具**：
- 卷轴：学习忍术
- 秘药：永久提升属性
- 传家宝：重生可保留
- 特殊物品：触发剧情

### 7.3 市场系统

**NPC商店**：
- 药铺：购买恢复类道具
- 武器店：购买基础装备
- 卷轴店：购买基础忍术卷轴
- 杂货铺：购买日常用品

**玩家市场**：
- 玩家间交易道具
- 拍卖行：稀有道具竞价
- 寄售行：设定价格出售

---

## 8. 社交系统

### 8.1 好友系统

- 添加好友：搜索或推荐
- 互动功能：聊天、送礼、组队
- 好友任务：合作完成任务
- 好友排行榜：展示好友排名

### 8.2 公会/家族系统

- 创建家族：消耗金币
- 加入家族：申请或被邀请
- 家族功能：
  - 家族聊天
  - 家族任务
  - 家族商店
  - 家族战
  - 家族技能

### 8.3 师徒系统

- 拜师：向高级玩家拜师
- 收徒：指导新手玩家
- 师徒任务：共同完成
- 师徒奖励：双方获得奖励

### 8.4 婚姻系统

- 结婚条件：双方好感度达到 100
- 结婚仪式：举办婚礼
- 结婚效果：
  - 共享部分属性加成
  - 解锁夫妻任务
  - 获得夫妻称号
  - 共同养育孩子（可选系统）

---

## 9. 成就系统

### 9.1 成就分类

**战斗成就**：
- 击败特定敌人
- 完成特定难度的任务
- 连续战斗胜利

**养成成就**：
- 属性达到指定值
- 学会特定忍术
- 觉醒血继限界

**剧情成就**：
- 完成特定剧情
- 解锁特定结局
- 影响世界走向

**社交成就**：
- 好友数量
- 家族贡献
- 婚姻次数

**特殊成就**：
- 隐藏成就
- 限时成就
- 传说成就

### 9.2 成就奖励

- **基础奖励**：金币、钻石
- **属性奖励**：永久属性点
- **道具奖励**：稀有道具
- **称号奖励**：获得特殊称号
- **特权奖励**：解锁特殊功能

---

## 10. 排行榜系统

### 10.1 排行榜类型

- **等级榜**：角色等级排名
- **属性榜**：各属性最高值
- **战力榜**：综合战力排名
- **成就榜**：成就点数排名
- **家族榜**：家族综合排名
- **PVP榜**：竞技场排名

### 10.2 排行榜奖励

- **每日奖励**：前10名获得额外资源
- **每周奖励**：结算周排名
- **每月奖励**：结算月排名
- **赛季奖励**：重置排名，发放赛季奖励

---

## 11. 技能树系统

### 11.1 技能树分类

- **体术系**：增强物理战斗能力
- **忍术系**：增强忍术能力
- **幻术系**：增强幻术能力
- **医疗系**：增强治疗和辅助能力
- **封印系**：增强封印能力
- **驯兽系**：增强与动物伙伴的配合
- **特殊系**：血继限界专属技能树

### 11.2 技能点获取

- 每次升级：获得 1 技能点
- 完成任务：额外技能点
- 成就奖励：技能点
- 道具奖励：技能点药水

### 11.3 技能前置

- 基础技能：无前置要求
- 进阶技能：需要基础技能达到指定等级
- 传说技能：需要多个前置技能 + 特殊条件

---

## 12. PVP系统

### 12.1 竞技场

- 匹配规则：战力相近
- 战斗模式：1v1 自动战斗
- 排位系统：段位升降
- 赛季制：定期重置

### 12.2 野外PVP

- 开放世界可随时发起挑战
- 战败惩罚：损失部分资源
- 胜利奖励：掠夺对方资源
- 保护时间：战败后保护期

### 12.3 家族战

- 家族间对抗
- 领地争夺
- 战利品分配

---

## 13. 剧情系统

### 13.1 剧情分支

- **线性剧情**：主线剧情按顺序推进
- **分支剧情**：选择不同选项走向不同分支
- **随机剧情**：基于概率触发的随机事件
- **隐藏剧情**：特定条件解锁的特殊剧情

### 13.2 影响因素

- 玩家选择：关键节点影响后续
- 属性要求：某些选项需要特定属性
- 伙伴羁绊：解锁不同剧情线
- 家族出身：初始剧情不同
- 时间选择：不同时期剧情不同

### 13.3 多结局系统

- **普通结局**：正常完成主线
- **特殊结局**：达成特定条件
- **隐藏结局**：极难达成
- **完美结局**：达成所有条件
- **悲剧结局**：特定选择导致

### 13.4 记忆系统

- 记录玩家的所有选择
- 生成剧情树
- 可回顾历史剧情
- 影响后续剧情

---

## 14. 装备系统

### 14.1 装备品质

| 品质 | 颜色 | 属性加成 | 获取方式 |
|-----|------|---------|---------|
| 普通 | 白色 | 100% | 商店购买、掉落 |
| 优秀 | 绿色 | 120% | 任务奖励、掉落 |
| 精良 | 蓝色 | 150% | 困难任务、掉落 |
| 史诗 | 紫色 | 200% | 极难任务、活动 |
| 传说 | 橙色 | 300% | 传说任务、活动 |
| 神话 | 红色 | 500% | 极低概率 |

### 14.2 装备强化

- 强化等级：1-10 级
- 强化消耗：金币 + 强化石
- 强化成功率：逐级降低
- 强化失败：装备损坏或降级（有保护道具）
- 强化效果：属性提升

### 14.3 装备镶嵌

- 镶嵌孔位：1-4 个
- 镶嵌材料：宝石、符文
- 镶嵌效果：额外属性加成
- 拆卸功能：无损拆卸（消耗金币）

### 14.4 装备套装

- 2件套：基础加成
- 4件套：进阶加成
- 6件套：高级加成
- 套装效果：套装专属效果

---

## 15. 存档系统

### 15.1 存档类型

- **快速存档**：自动存档
- **手动存档**：玩家主动保存
- **多重存档**：最多 5 个存档位
- **云存档**：跨设备同步

### 15.2 存档时机

- 自动存档：任务完成、战斗结束、重要剧情后
- 手动存档：玩家随时可存（非战斗状态）
- 强制存档：关键时刻自动保存

### 15.3 存档内容

- 角色信息
- 剧情进度
- 物品栏
- 伙伴关系
- 成就进度
- 系统设置

---

**文档版本**：v1.0
**创建日期**：2026-02-13
**负责人**：Product Manager
**状态**：待审核
